<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tantra.exe · Breath</title>

  <!-- Elegant, readable fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-dark: #0b0b0f;
      --bg-mid: #15151c;
      --gold: #c9a24d;
      --gold-soft: rgba(201,162,77,0.25);
      --ink: #f4f4f6;
      --mist: #9a9aa6;

      --inhale: #6fa8dc;
      --hold: #8e7cc3;
      --exhale: #c9a24d;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      height: 100vh;
      background:
        radial-gradient(circle at top, #1a1a24 0%, var(--bg-dark) 60%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--ink);
      font-family: "Inter", system-ui, sans-serif;
    }

    .ritual {
      width: 360px;
      padding: 46px 38px;
      border-radius: 22px;
      background:
        linear-gradient(180deg, var(--bg-mid), #0f0f14);
      box-shadow:
        0 40px 80px rgba(0,0,0,0.6),
        inset 0 0 0 1px rgba(255,255,255,0.04);
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    /* Soft colour bloom */
    .ritual::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle, var(--gold-soft), transparent 60%);
      opacity: 0.35;
      pointer-events: none;
    }

    .sigil {
      font-size: 0.7rem;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 18px;
      opacity: 0.85;
    }

    .phase {
      font-family: "Cormorant Garamond", serif;
      font-size: 2.2rem;
      font-weight: 500;
      margin-bottom: 8px;
      transition: color 0.6s ease;
    }

    .round {
      font-size: 0.85rem;
      color: var(--mist);
      margin-bottom: 26px;
    }

    .count {
      font-family: "Cormorant Garamond", serif;
      font-size: 3.6rem;
      font-weight: 600;
      margin-bottom: 34px;
      line-height: 1;
      transition: transform 0.4s ease;
    }

    .pulse {
      transform: scale(1.06);
    }

    button {
      background: none;
      border: 1px solid var(--gold);
      color: var(--gold);
      padding: 12px 36px;
      border-radius: 999px;
      font-size: 0.95rem;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.35s ease;
    }

    button:hover {
      background: rgba(201,162,77,0.12);
      box-shadow: 0 0 20px rgba(201,162,77,0.25);
    }
  </style>
</head>

<body>

<div class="ritual">
  <div class="sigil">Tantra.exe</div>
  <div class="phase" id="phase">Ready</div>
  <div class="round" id="round">—</div>
  <div class="count" id="count">—</div>
  <button onclick="startBreathing()">Begin</button>
</div>

<script>
  /* ---------------- CONFIG ---------------- */
  const phases = [
    { name: "Inhale", time: 4, tone: 528, color: "var(--inhale)" },
    { name: "Hold",   time: 4, tone: 432, color: "var(--hold)" },
    { name: "Exhale", time: 6, tone: 396, color: "var(--exhale)" }
  ];

  const totalRounds = 6;

  let round = 0;
  let phaseIndex = 0;
  let timer;
  let audioCtx;

  /* ---------------- CHIME ---------------- */
  function playChime(freq, duration = 0.45) {
    if (!audioCtx) {
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    }

    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    const now = audioCtx.currentTime;

    osc.type = "sine";
    osc.frequency.value = freq;

    gain.gain.setValueAtTime(0, now);
    gain.gain.linearRampToValueAtTime(0.22, now + 0.03);
    gain.gain.exponentialRampToValueAtTime(0.001, now + duration);

    osc.connect(gain);
    gain.connect(audioCtx.destination);

    osc.start(now);
    osc.stop(now + duration);
  }

  /* ---------------- FLOW ---------------- */
  function startBreathing() {
    clearInterval(timer);
    round = 0;
    phaseIndex = 0;
    nextPhase();
  }

  function nextPhase() {
    if (round >= totalRounds) {
      document.getElementById("phase").innerText = "Stillness";
      document.getElementById("round").innerText = "Six rounds complete";
      document.getElementById("count").innerText = "✓";
      document.getElementById("phase").style.color = "var(--gold)";
      playChime(256, 1);
      return;
    }

    const phase = phases[phaseIndex];
    let remaining = phase.time;

    const phaseEl = document.getElementById("phase");
    const roundEl = document.getElementById("round");
    const countEl = document.getElementById("count");

    phaseEl.innerText = phase.name;
    phaseEl.style.color = phase.color;
    roundEl.innerText = `Round ${round + 1} of ${totalRounds}`;
    countEl.innerText = remaining;

    playChime(phase.tone);

    timer = setInterval(() => {
      remaining--;
      countEl.innerText = remaining;
      countEl.classList.remove("pulse");
      void countEl.offsetWidth;
      countEl.classList.add("pulse");

      if (remaining <= 0) {
        clearInterval(timer);
        phaseIndex++;

        if (phaseIndex >= phases.length) {
          phaseIndex = 0;
          round++;
        }

        setTimeout(nextPhase, 600);
      }
    }, 1000);
  }
</script>

</body>
</html>
